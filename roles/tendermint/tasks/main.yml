---

- name: create tendermint user
  user: name=tendermint

- name: Download tendermint binary
  get_url:
    url: https://github.com/tendermint/tendermint/releases/download/v0.32.1/tendermint_v0.32.1_linux_amd64.zip
    dest: /tmp/tendermint.zip
    checksum: sha256:64a3dad4efce75d63b772fdff85216f809185d762b9232971c3270ef729cc331

- name: Install tendermint binary
  unarchive:
    src: /tmp/tendermint.zip
    dest: /usr/bin
    remote_src: yes
    owner: root
    group: root
    mode: 0755

- name: Cleanup tendermint post-install
  file: path=/tmp/tendermint.zip state=absent

- name: Install tendermint service
  copy: src=tendermint.service dest=/etc/systemd/system/tendermint.service
  notify: reload systemd
